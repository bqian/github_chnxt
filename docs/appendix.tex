%%%%%%%%%% APPENDIX %%%%%%%%%%
\section{\label{sec:chnxt_api}ChNXT Class API}
The header file nxt.h defines all the data types, macros and function prototypes 
for th Lego Mindstorms NXT API library. The header file declares a class called 
ChNXT which contains member functions which may be used to control the Lego
Minstorms NXT.\\
%% DATA TYPE %%
\subsection{\label{sec:datatypes}Data Types Used in ChNXT Class}
The data types defined in the header file {\tt nxt.h} are described in this 
appendix. These data types are used by the NXT library to represent certain values, 
such as joint id's and motor directions.\\

\noindent
\begin{longtable}{p{3.5cm}p{12cm}} 
    \hline
    Data Type& Description \\
    \hline 
    {\tt nxtJointId\_t} & An enumerated value that indicates a 
    nxt joints. \\
    {\tt nxtJointState\_t} & The current state of a nxt joint. \\
    {\tt nxtSensorId\_t} & An enumerate value that indicates a 
    nxt's sensors. \\
    {\tt nxtSensorType\_t} & An enumerate value that indicates 
    the type of a sensor of a nxt.\\
    {\tt nxtSensorMode\_t} & An enumerate value that indicates 
    the mode of a sensor for getting value. \\
    \hline
\end{longtable}

\subsubsection{\label{sec:nxtJointId_t}{\tt nxtJointId\_t}}
This data type is an enumerated type used to identify a joint on 
the Lego Mindstorms NXT. Valid values for this type are:
\begin{lstlisting}
typedef enum nxt_joints_e {
  NXT_JOINT1 = 0,
  NXT_JOINT2 = 1,
  NXT_JOINT3 = 2,
} nxtJointId_t;
\end{lstlisting}
\index{nxt\_joints\_t}
\index{NXT\_JOINT1}
\index{NXT\_JOINT2}
\index{NXT\_JOINT3}

\noindent
\begin{longtable}{p{3.5cm}p{12cm}} 
    \hline 
    Value & Description \\
    \hline 
    {\tt NXT\_JOINT1} & PortA on the Lego Mindstorms NXT. \\
    {\tt NXT\_JOINT2} & PortB on the Lego Mindstorms NXT. \\
    {\tt NXT\_JOINT3} & PortC on the Lego Mindstorms NXT. \\
    \hline
\end{longtable}

\subsubsection{\label{sec:nxtJointState_t}{\tt nxtJointState\_t}}
This datatype is an enumerated type used to designate the current 
movement state of a joint. The values may be retrieved from the 
robot with the {\tt getJointState()} function and may be set 
with the {\tt moveContinuous()} family of functions. Valid values are:
\begin{lstlisting}
typedef enum nxt_joint_state_e {
    NXT_FORWARD   = 1,
    NXT_BACKWARD  = -1,
} nxtJointState_t;
\end{lstlisting}
\index{nxtJointState\_t}
\index{NXT\_FORWARD}
\index{NXT\_BACKWARD}

\noindent
\begin{longtable}{p{3.5cm}p{12cm}}
    \hline
    Value & Description \\
    \hline
    {\tt NXT\_FORWARD} & This value indicates that the joint is currently moving forward.  \\
{\tt NXT\_BACKWARD}& This value indicates that the joint is currently moving backward. \\
    \hline
\end{longtable}

\subsubsection{\label{sec:nxtSensorPort_t}{\tt nxtSensorPort\_t}}
This datatype is an enumerated type used to identify a sensor on 
the Lego Mindstorms NXT. Valid values for this type are:
\begin{lstlisting}
typedef enum nxt_sensors_e{
    NXT_SENSORPORT1 = 0,
    NXT_SENSORPORT2 = 1,
    NXT_SENSORPORT3 = 2,
    NXT_SENSORPORT4 = 3
} nxtSensorId_t;
\end{lstlisting}
\index{nxtSensorId\_t}
\index{NXT\_SENSORPORT1}
\index{NXT\_SENSORPORT2}
\index{NXT\_SENSORPORT3}
\index{NXT\_SENSORPORT4}

\noindent
\begin{longtable}{p{3.5cm}p{12cm}}
    \hline
    Value &       Description\\
    \hline
    {\tt NXT\_SENSORPORT1}&Select sensor input PORT 1 on the NXT.\\
    {\tt NXT\_SENSORPORT2}&Select sensor input PORT 2 on the NXT.\\
    {\tt NXT\_SENSORPORT3}&Select sensor input PORT 3 on the NXT.\\
    {\tt NXT\_SENSORPORT4}&Select sensor input PORT 4 on the NXT.\\
    \hline
\end{longtable}

\subsubsection{\label{sec:nxtSensorType_t}{\tt nxtSensorType\_t}}
This data type is used to identify the type of a sensor for the Lego Mindstorms 
NXT. Valid values for this type are:
\begin{lstlisting}
typedef enum nxt_sensor_type_e{
    NXT_SENSORTYPE_SWITCH          = 0x01,
    NXT_SENSORTYPE_TEMPERATURE     = 0x02,
    NXT_SENSORTYPE_LIGHT_ACTIVE    = 0x05,
    NXT_SENSORTYPE_LIGHT_INACTIVE  = 0x06,
    NXT_SENSORTYPE_SOUND_DB        = 0x07,
    NXT_SENSORTYPE_SOUND_DBA       = 0x08,
    NXT_SENSORTYPE_LOWSPEED        = 0x0A,
    NXT_SENSORTYPE_9V              = 0x0B,
    NXT_SENSORTYPE_HIGHSPEED       = 0x0C, /* No useage now */
    NXT_SENSORTYPE_COLORFULL       = 0x0D,
    NXT_SENSORTYPE_COLORRED        = 0x0E,
    NXT_SENSORTYPE_COLORGREEN      = 0x0F,
    NXT_SENSORTYPE_COLORBLUE       = 0x10,
    NXT_SENSORTYPE_COLORNONE       = 0x11
} nxtSensorType_t;

#define NXT_SENSORTYPE_TOUCH      NXT_SENSORTYPE_SWITCH
#define NXT_SENSORTYPE_ULTRASONIC NXT_SENSORTYPE_LOWSPEED_9V
\end{lstlisting}
\index{nxtSensorType\_t}
\index{NXT\_SENSORTYPE\_SWITCH}
\index{NXT\_SENSORTYPE\_TEMPERATURE}
\index{NXT\_SENSORTYPE\_LIGHT\_ACTIVE}
\index{NXT\_SENSORTYPE\_LIGHT\_INACTIVE}
\index{NXT\_SENSORTYPE\_SOUND\_DB}
\index{NXT\_SENSORTYPE\_SOUND\_DBA}
\index{NXT\_SENSORTYPE\_LOWSPEED}
\index{NXT\_SENSORTYPE\_LOWSPEED\_9V}
\index{NXT\_SENSORTYPE\_HIGHTSPEED}
\index{NXT\_SENSORTYPE\_COLORFULL}
\index{NXT\_SENSORTYPE\_COLORRED}
\index{NXT\_SENSORTYPE\_COLORGREEN}
\index{NXT\_SENSORTYPE\_COLORBLUE}
\index{NXT\_SENSORTYPE\_COLORNONE}
\index{NXT\_SENSORTYPE\_TOUCH}
\index{NXT\_SENSORTYPE\_ULTRASONIC}

\noindent
\begin{longtable}{p{5.5cm}p{10cm}}
    \hline
    Value &       Description\\
    \hline
    {\tt NXT\_SENSORTYPE\_SWITCH}        &Set to a switch type sensor. Touch 
    sensor is a switch type sensor.\\
    {\tt NXT\_SENSORTYPE\_TEMPERATURE}   &Set to Temperature Sensor.\\
    {\tt NXT\_SENSORTYPE\_LIGHT\_ACTIVE} &Set to Light Sensor in light active 
    mode(LED on).\\
    {\tt NXT\_SENSORTYPE\_LIGHT\_INACTIVE}&Set to Light Sensor in light inactive 
    mode(LED off).\\
    {\tt NXT\_SENSORTYPE\_SOUND\_DB}    &Set to Sound Sensor in dB.\\
    {\tt NXT\_SENSORTYPE\_SOUND\_DBA}   &Set to Sound Sensor in dB with adjusted.\\
    {\tt NXT\_SENSORTYPE\_LOWSPEED}     &Set to ISP type sensor.\\
    {\tt NXT\_SENSORTYPE\_LOWSPEED\_9V} &Set to ISP type sensor with 9 Voltage. 
    The ultrasonic sensor belongs to this type of sensor.\\
    {\tt NXT\_SENSORTYPE\_HIGHSPEED}     &Not avialable now.\\
    {\tt NXT\_SENSORTYPE\_COLORFULL}     &Set to Color Sensor in color detector mode.\\
    {\tt NXT\_SENSORTYPE\_COLORRED}      &Set to Color Sensor in lightsensor mode 
    with red light on.\\
    {\tt NXT\_SENSORTYPE\_COLORGREEN}    &Set to Color Sensor in lightsensor mode 
    with green light on.\\
    {\tt NXT\_SENSORTYPE\_COLORBLUE}     &Set to Color Sensor in lightsensor 
    mode with blue light on.\\
    {\tt NXT\_SENSORTYPE\_COLORNONE}     &Set to Color Sensor in lightsensor 
    mode with no light on.\\
    \hline
\end{longtable}
%\end{tabular}

\subsubsection{\label{sec:nxtSensorMode_t}{\tt nxtSensorMode\_t}}
This data type is used to identify the mode for a sensor to get value for the 
Lego Mindstorms NXT. Valid values for this type are:
\begin{lstlisting}
typedef enum nxt_sensor_mode_e{
    NXT_SENSORMODE_RAWMODE           = 0x00,
    NXT_SENSORMODE_BOOLEANMODE       = 0x20
    NXT_SENSORMODE_TRANSITIONCNTMODE = 0x40,
    NXT_SENSORMODE_PERIODCOUNTERMODE = 0x60,
    NXT_SENSORMODE_PCTFULLSCALEMODE  = 0x80,
    NXT_SENSORMODE_CELSIUSMODE       = 0xA0,
    NXT_SENSORMODE_FAHRENHEITMODE    = 0xC0
} nxtSensorMode_t;
\end{lstlisting}
\index{nxtSensorMode\_t}
\index{NXT\_SENSORMODE\_RAWMODE}
\index{NXT\_SENSORMODE\_BOOLEANMODE}
\index{NXT\_SENSORMODE\_TRANSITIONCNTMODE}
\index{NXT\_SENSORMODE\_PERIODCOUNTERMODE}
\index{NXT\_SENSORMODE\_PCTFULLSCALEMODE}
\index{NXT\_SENSORMODE\_CELSIUSMODE}
\index{NXT\_SENSORMODE\_FAHRENHEITMODE}

\noindent
\begin{longtable}{p{6cm}p{9.5cm}} 
    \hline
    Value & Description\\
    \hline
    {\tt NXT\_SENSORMODE\_RAWMODE}      &Get sensor value as raw mode.\\	 
    {\tt NXT\_SENSORMODE\_BOOLEANMODE}  &Get sensor value as boolean mode.\\
    {\tt NXT\_SENSORMODE\_TRANSITIONCNTMODE}  &Get sensor value as a number of 
    transitions between TRUE and FALSE.\\
    {\tt NXT\_SENSORMODE\_COUNTERMODE}  &Get sensor value as a number of 
    transitions from FALSE to TRUE, then back to FALSE.\\
    {\tt NXT\_SENSORMODE\_PCTFULLSCALEDMODE}  &Get sensor value as percentage of 
    full scale reading for configured sensor type.\\
    {\tt NXT\_SENSORMODE\_CELSIUSMODE}  &Get sensor value of temperature in 
    degrees Celsius.\\
    {\tt NXT\_SENSORMODE\_FAHRENHEITMODE}  &Get sensor value of temperature in 
    degrees Fahrenheit.\\
    \hline
\end{longtable}
%%%%%%%%%% End of Data Types %%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%% ChNXT Class API %%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%% the table of communication functions %%%%%%%%%%%%
\subsection{ChNXT Class API Overview}
%\begin{table}[H]
\begin{longtable}{p{6cm}p{10cm}}
\caption{Functions for Communication}\\
\hline
Function & Description\\
\hline
{\tt connect()}&Connects to the Mindstorms NXT using bluetooth 
(Read bluetooth address from the configuration file automaticly).\\
{\tt connectWithAddress()}&Connects to the Mindstorms NXT via 
bluetooth (Read bluetooth address from users' input).\\
{\tt disconnect()}  &Disconnects from the Mindstorms NXT.\\
\hline
\end{longtable}
%\end{table}
% the table for the checking functions %
%\begin{table}[H]
\begin{longtable}{ p{6cm}p{10cm}}
\caption{Functions for Checking Status}\\
\hline
Function & Description\\
\hline
{\tt isConnected()}    &Check the connection to a robot.\\
{\tt isMoving()}       &Check if any joints are currently in motion.\\
\hline
\end{longtable}
%\end{table}
% the table for the sensors' functions %
%\begin{table}[H]
\begin{longtable}{p{6cm}p{10cm}}
\caption{Functions for Sensors}\\
\hline
Function & Description\\
\hline
{\tt setSensor()}       &Setup the sensors to collect data from the environment.\\
{\tt getSensor()}       &Get the data collected by the sensors from the NXT.\\
\hline
\end{longtable}
%\end{table}

%%%%%%%%%%%%%%% functions for joints %%%%%%%%%%%%%%
%\begin{table}[H]
\begin{longtable}{p{6cm}p{10cm}}
\caption{Functions for Joints}\\
\hline
%\begin{tabular}{ p{6cm}p{10cm} }\hline
Functions & Description\\
\hline
{\tt setJointZero()}         &Set the tachometer to zero for a single joint.\\
{\tt setToZero()}            &Set the tachometer to zero for all joints.\\
{\tt setJointSpeedRatio()}   &Set up a single joint speed.\\
{\tt setJointSpeedRatios()}  &Set up all joints' speed.\\
{\tt moveJointContinuousNB()}&Make a single joint move continuously.\\
{\tt moveJoint()}            &Make a single joint move a user-specified angle.\\
{\tt moveJointNB()}          &Identical to {\tt moveJoint()} but non-blocking.\\
{\tt moveJointTo()}          &Make a single joint move to an absolute angle.\\
{\tt moveJointToNB()}        &Identical to {\tt moveJointTo()} but non-blocking.\\
{\tt move()}                 &Make all joints move a user-specified angles.\\
{\tt moveNB()}               &Identical to {\tt move()} but non-blocking.\\
{\tt moveTo()}               &Make all joints move to absolute angles.\\
{\tt moveToNB()}             &Identical to {\tt moveTo()} but non-blocking.\\
{\tt moveToZero()}           &Make all joints move to absolute zero positions.\\
{\tt moveToZeroNB()}         &Identical to {\tt moveToZero()} but non-blocking.\\
{\tt moveContinuousNB()}     &Make all joints move continuously.\\
{\tt moveContinuousTime()}   &Make all joints move continuously for a certain amount of time.\\
{\tt moveWait()}             &Wait untill all motors have stopped moving.\\
{\tt getJointAngle()}        &Get tachometer counts from NXT.\\
{\tt getJointSpeedRatio()}   &Get a motor's speed ratio from NXT.\\
{\tt getJointSpeedRatios()}  &Get all motors' speed ratios from NXT.\\
{\tt stopOneJoint()}         &Make a single joint stop moving.\\
{\tt stopTwoJoints()}        &Make two joints stop moving.\\
{\tt stopAllJoints()}        &Make all joints stop moving.\\
\hline
\end{longtable}
%\end{tabular}
%\end{table}

% the functions for vehicle configuration %
%\begin{table}[H]
\begin{longtable}{p{6cm}p{10cm}}
\caption{Functions for the Vehicle Configuration
\label{tab:function_vehicle}}\\
\hline
Functions & Description\\
\hline
{\tt vehicleRollForward()}      &Moves the NXT vehicle forward.\\
{\tt vehicleRollForwardNB()}    &Identical to {\tt vehicleRollForward()}, but non-blocking.\\
{\tt vehicleRollBackward()}     &Moves the NXT vehicle backward.\\
{\tt vehicleRollBackwardNB()}   &Identical to {\tt vehicleRollBackward()}, but non-blocking.\\
{\tt vehicleRotateLeft()}       &Rotates the NXT vehicle left.\\
{\tt vehicleRotateLeftNB()}     &Identical to {\tt vehicleRotateLeft()}, but non-blocking.\\
{\tt vehicleRotateRight()}      &Rotates the NXT vehicle right.\\
{\tt vehicleRotateRightNB()}    &Identical to {\tt vehicleRotateRight()}, but non-blocking.\\
{\tt vehicleMotionWait()}       &Wait until vehicle stop moving.\\
\hline
\end{longtable}
%\end{table}

%% the functions for humanoid configuration %%
%\begin{table}[H]
\begin{longtable}{p{6cm}p{10cm}}
    \caption{Functions for the Humanoid Configuration
    \label{tab:function_humanoid}}\\
    \hline
    Functions & Description\\ \hline
        {\tt humanoidWalkForward()}   &Moves the NXT humanoid forward.\\
        {\tt humanoidWalkForwardNB()} &Identical to {\tt humanoidWalkForward()}, but non-blocking.\\
        {\tt humanoidWalkBackward()}  &Moves the NXT humanoid backward.\\
        {\tt humanoidWalkForwardNB()} &Identical to {\tt humanoidWalkBackward()}, but non-blocking.\\
        {\tt humanoidMotionWait()}    &Wait until humanoid robot stop moving.\\
    \hline
\end{longtable}
%\end{table}

\clearpage
\newpage
% functions details %
\subsection{ChNXT Class API Details}
\input{api/api.tex}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% End of Appendix chnxt_api %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Appendix ultility_functions %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\clearpage
\newpage
\section{\label{sec:ultility_functions}Miscellaneous Utility Functions}
Besides the control functions described in Appendix \ref{sec:chnxt_api}, some utility functions are
also very useful when you are programming, such as convert a certain angle to distance with the 
coresponding radius of wheel. Therefore, we will introduce you some useful utility functions in 
this section.\\
\input{utility_funcs/utility_funcs.tex}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% End of appendix ultility_functions %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
